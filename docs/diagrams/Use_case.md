# Диаграмма вариантов использования

![Диаграмма вариантов использования](diagrams/images/Use_Case.png)

---

# Глоссарий

| Термин | Определение |
|:--|:--|
| Пользователь | Человек, использующий веб-приложение |
| Гость | Пользователь без регистрации/входа |
| Зарегистрированный пользователь | Пользователь с учётной записью (этап 2) |
| Биржа | Криптобиржа с деривативами (OKX, Bybit, Binance Futures, MEXC и др.) |
| Токен (base) | Базовый актив (BTC, ETH, SOL и т.п.) |
| Контракт | Фьючерсный инструмент (PERP/квартальный; USDT-M/USD-M/coin-M) |
| Спред | Разница цен одного и того же актива между двумя биржами (абсолют и %) |
| Избранное | Пользовательский список токенов/контрактов (этап 2) |
| Уведомление | Сигнал (push/e-mail/бот) при выполнении условия (например, спред > X%) |
| Биржевые API | Публичные REST/WebSocket интерфейсы, источник данных |

---

# Поток событий

## Содержание
1 [Актёры](#actors)  
2 [Варианты использования](#use_cases)  
&emsp;2.1 [Страница «Биржи»](#exchanges_page)  
&emsp;&emsp;2.1.1 [Поиск/фильтр по токенам и биржам](#uc_filter_exchanges)  
&emsp;&emsp;2.1.2 [Просмотр цен по выбранной бирже](#uc_view_exchange)  
&emsp;&emsp;2.1.3 [Добавить токен в избранное *(авторизованные)*](#uc_fav_add)  
&emsp;2.2 [Страница «Спреды»](#spreads_page)  
&emsp;&emsp;2.2.1 [Просмотр текущих спредов](#uc_view_spreads)  
&emsp;2.3 [Страница «Избранное» *(авторизованные)*](#favorites_page)  
&emsp;&emsp;2.3.1 [Просмотр избранных токенов](#uc_view_favorites)  
&emsp;&emsp;2.3.2 [Управление уведомлениями по токену](#uc_alerts)  
&emsp;&emsp;2.3.3 [Удалить токен из избранного](#uc_fav_remove)  
2.4 [Вход/Регистрация *(этап 2)*](#uc_login)  
2.5 [Выход *(этап 2)*](#uc_logout)  

---

<a name="actors"/>

## 1 Актёры

| Актёр | Описание |
|:--|:--|
| **Гость** | Просматривает цены/спреды без авторизации |
| **Зарегистрированный пользователь** | Имеет доступ к «Избранному» и уведомлениям |
| **Биржевые API** | Источник рыночных и справочных данных (REST/WS) |
| **Сервис уведомлений** | Канал отправки алертов (e-mail/бот/Push) *(этап 2)* |

---

<a name="use_cases"/>

## 2 Варианты использования

<a name="exchanges_page"/>

### 2.1 Страница «Биржи»

<a name="uc_filter_exchanges"/>

#### 2.1.1 Поиск/фильтр по токенам и биржам

**Описание.** Пользователь выбирает биржи и токены для наблюдения; видит таблицу цен.  
**Предусловия.** Интернет-соединение.  
**Основной поток.**
1. Пользователь открывает «Биржи».  
2. Задаёт фильтры: биржи (мультивыбор), тип контракта (PERP/квартал), маржа (USDT-M/USD-M/coin-M), поиск по base (например, `ETH`).  
3. Система запрашивает/обновляет данные (REST/WS), нормализует тикеры.  
4. Отображается таблица: **Биржа | Контракт | Last/Mark | 24h Δ**.  
5. Пользователь может отсортировать таблицу (цена/Δ/алфавит).  

**Альтернативы.**  
А1. *Ничего не найдено* — показать пустое состояние и подсказки.  

**Ошибки.**  
Е1. *Таймаут/ошибка API* — уведомление + кнопка «Повторить».

---

<a name="uc_view_exchange"/>

#### 2.1.2 Просмотр цен по выбранной бирже

**Описание.** Детальный список контрактов одной биржи.  
**Предусловия.** Пользователь выбрал биржу.  
**Основной поток.**
1. Система получает список контрактов и цены.  
2. Отображает таблицу: **Контракт | Тип | Маржа | Last | 24h Δ**.  
3. Ссылка «Показать спред» переходит к [Просмотру спредов](#uc_view_spreads).

---

<a name="uc_fav_add"/>

#### 2.1.3 Добавить токен в избранное *(авторизованные)*

**Описание.** Сохранение токена/контракта в список «Избранное».  
**Предусловия.** Пользователь авторизован.  
**Основной поток.**
1. Пользователь нажимает «☆» в строке токена.  
2. Система сохраняет токен в профиле.  
3. Появляется подтверждение «Добавлено».  

**Альтернативы.**  
А1. *Токен уже в избранном* — сообщение «Уже добавлен».

---

<a name="spreads_page"/>

### 2.2 Страница «Спреды»

<a name="uc_view_spreads"/>

#### 2.2.1 Просмотр текущих спредов

**Описание.** Отображение актуальных межбиржевых спредов.  
**Предусловия.** Есть выбранный токен/набор токенов (из фильтра либо преднастроек).  
**Основной поток.**
1. Пользователь открывает «Спреды».  
2. Система получает котировки по WS (фоллбек на REST) для всех релевантных бирж.  
3. Вычисляет спреды: абсолют и % к опорной цене/бирже.  
4. Рендерит таблицу **Token | From (Биржа/Цена) | To (Биржа/Цена) | Spread% | Примечания**.  
5. Таблица обновляется в реальном времени, доступна сортировка по `Spread%`.  

**Альтернативы.**  
А1. *Не все биржи ответили* — ячейки `N/A`.  

**Ошибки.**  
Е1. *Разрыв WS* — переключение на REST + статус «Переподключение…».

---

<a name="favorites_page"/>

### 2.3 Страница «Избранное» *(авторизованные)*

<a name="uc_view_favorites"/>

#### 2.3.1 Просмотр избранных токенов

**Описание.** Список избранных токенов со всех доступных бирж и краткими метаданными.  
**Предусловия.** Пользователь авторизован; список «Избранное» не пуст.  
**Основной поток.**
1. Система загружает избранные токены пользователя.  
2. Для каждого токена получает текущие цены и статусы `Депозиты/Выводы` (если доступны).  
3. Отображает таблицу: **Токен | Биржа | Last/Mark | Spread% (макс) | Депозит | Вывод | Управление уведомлениями**.

**Альтернативы.**  
А1. *Список пуст* — показать подсказку «Добавьте токены на странице Биржи».

---

<a name="uc_alerts"/>

#### 2.3.2 Управление уведомлениями по токену

**Описание.** Настройка условий оповещения (например, `Spread% ≥ X` между биржами A и B).  
**Предусловия.** Пользователь авторизован; токен находится в «Избранном».  
**Основной поток.**
1. Пользователь нажимает «Уведомления» в строке токена.  
2. Задаёт условие: пары бирж, порог %, срок действия, канал доставки.  
3. Система валидирует и сохраняет правило; активирует мониторинг.  
4. Появляется подтверждение «Уведомление включено».  

**Ошибки.**  
Е1. *Неверный формат/порог* — показать сообщение и подсветить поле.

---

<a name="uc_fav_remove"/>

#### 2.3.3 Удалить токен из избранного

**Описание.** Удаление токена из списка.  
**Предусловия.** Пользователь авторизован; токен в списке.  
**Основной поток.**
1. Пользователь нажимает «★ Удалить».  
2. Система удаляет токен из профиля и скрывает строку.  

---

<a name="uc_login"/>

### 2.4 Вход/Регистрация *(этап 2)*

**Описание.** Доступ к функциям «Избранное» и «Уведомления».  
**Основной поток.**
1. Пользователь открывает модальное окно.  
2. Вводит данные / выбирает SSO.  
3. Система создаёт/находит профиль и авторизует пользователя.

**Ошибки.**  
Е1. *Неверные данные* — сообщение об ошибке + повтор.

---

<a name="uc_logout"/>

### 2.5 Выход *(этап 2)*

**Основной поток.**
1. Пользователь выбирает «Выйти».  
2. Система очищает сессию, скрывает «Избранное», оставляя доступ гостя.

---
